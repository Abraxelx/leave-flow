<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<VBox spacing="0" xmlns:fx="http://javafx.com/fxml" fx:controller="com.halilsahin.leaveflow.ui.MainController">
    <padding>
        <Insets bottom="10" left="10" right="10" top="10" />
    </padding>

    <!-- Başlık -->
    <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-background-color: #2196F3; -fx-padding: 15; -fx-background-radius: 5;">
        <Label style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: white;" text="İzin Yönetim Sistemi" />
        <Region HBox.hgrow="ALWAYS" />
        <Button fx:id="quickAddButton" onAction="#onQuickAddLeave" style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-weight: bold;" text="+ Hızlı İzin Ekle" />
    </HBox>

    <!-- Tab Pane -->
    <TabPane fx:id="mainTabPane" VBox.vgrow="ALWAYS" style="-fx-background-color: white;">
        
        <!-- Çalışanlar Tab -->
        <Tab text="👥 Çalışanlar" closable="false">
            <VBox spacing="15">
                <padding>
                    <Insets bottom="15" left="15" right="15" top="15" />
                </padding>
                
                <!-- Çalışan Listesi -->
                <VBox spacing="10">
                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <Label style="-fx-font-size: 18px; -fx-font-weight: bold;" text="Çalışan Listesi" />
                        <Region HBox.hgrow="ALWAYS" />
                        <Button onAction="#onAddEmployee" style="-fx-background-color: #2196F3; -fx-text-fill: white;" text="+ Yeni Çalışan" />
                    </HBox>
                    
                    <TableView fx:id="employeeTable" VBox.vgrow="ALWAYS" style="-fx-background-color: white;">
                        <columns>
                            <TableColumn text="ID" fx:id="colId" prefWidth="50" />
                            <TableColumn text="İsim" fx:id="colName" prefWidth="200" />
                            <TableColumn text="İşe Giriş" fx:id="hireDateColumn" prefWidth="100" />
                            <TableColumn text="Hizmet Süresi" fx:id="colServiceYears" prefWidth="100" />
                            <TableColumn text="Yıllık İzin" fx:id="totalLeaveColumn" prefWidth="100" />
                            <TableColumn text="Kalan İzin" fx:id="remainingLeaveColumn" prefWidth="100" />
                            <TableColumn text="İşlemler" fx:id="actionsColumn" prefWidth="120" />
                        </columns>
                    </TableView>
                </VBox>
            </VBox>
        </Tab>
        
        <!-- İzinler Tab -->
        <Tab text="📅 İzinler" closable="false">
            <VBox spacing="15">
                <padding>
                    <Insets bottom="15" left="15" right="15" top="15" />
                </padding>
                
                <!-- Filtreler -->
                <HBox spacing="15" alignment="CENTER_LEFT">
                    <Label text="Çalışan:" />
                    <ComboBox fx:id="employeeFilterCombo" prefWidth="200" promptText="Tüm Çalışanlar" />
                    <Label text="Tarih:" />
                    <DatePicker fx:id="startDateFilter" prefWidth="150" promptText="Başlangıç" />
                    <Label text="-" />
                    <DatePicker fx:id="endDateFilter" prefWidth="150" promptText="Bitiş" />
                    <Region HBox.hgrow="ALWAYS" />
                    <Button onAction="#onFilterLeaves" style="-fx-background-color: #2196F3; -fx-text-fill: white;" text="Filtrele" />
                    <Button onAction="#onClearFilters" style="-fx-background-color: #757575; -fx-text-fill: white;" text="Temizle" />
                </HBox>
                
                <!-- İzin Listesi -->
                <VBox spacing="10">
                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <Label style="-fx-font-size: 18px; -fx-font-weight: bold;" text="İzin Kayıtları" />
                        <Region HBox.hgrow="ALWAYS" />
                        <Button onAction="#onExportLeaves" style="-fx-background-color: #4CAF50; -fx-text-fill: white;" text="📊 PDF Raporu" />
                    </HBox>
                    
                    <TableView fx:id="leaveTable" VBox.vgrow="ALWAYS" style="-fx-background-color: white;">
                        <columns>
                            <TableColumn text="ID" fx:id="colLeaveId" prefWidth="50" />
                            <TableColumn text="Çalışan" fx:id="colLeaveEmployee" prefWidth="150" />
                            <TableColumn text="İzin Türü" fx:id="colLeaveType" prefWidth="120" />
                            <TableColumn text="Başlangıç" fx:id="colLeaveStart" prefWidth="100" />
                            <TableColumn text="Bitiş" fx:id="colLeaveEnd" prefWidth="100" />
                            <TableColumn text="Süre" fx:id="colLeaveDuration" prefWidth="80" />
                            <TableColumn text="Kalan İzin" fx:id="colLeaveRemaining" prefWidth="100" />
                            <TableColumn text="İşlemler" fx:id="colLeaveActions" prefWidth="100" />
                        </columns>
                    </TableView>
                </VBox>
                
                <!-- İstatistikler -->
                <HBox spacing="30" alignment="CENTER" style="-fx-background-color: #f5f5f5; -fx-padding: 15; -fx-background-radius: 5;">
                    <VBox alignment="CENTER" spacing="5">
                        <Label text="Toplam İzin Günü" style="-fx-font-size: 12px; -fx-text-fill: #666;" />
                        <Label fx:id="totalDaysLabel" text="0" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #2196F3;" />
                    </VBox>
                    <VBox alignment="CENTER" spacing="5">
                        <Label text="Ortalama Süre" style="-fx-font-size: 12px; -fx-text-fill: #666;" />
                        <Label fx:id="avgDaysLabel" text="0 gün" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #4CAF50;" />
                    </VBox>
                    <VBox alignment="CENTER" spacing="5">
                        <Label text="Toplam Kayıt" style="-fx-font-size: 12px; -fx-text-fill: #666;" />
                        <Label fx:id="totalRecordsLabel" text="0" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #FF9800;" />
                    </VBox>
                </HBox>
            </VBox>
        </Tab>
        
        <!-- Raporlar Tab -->
        <Tab text="📊 Raporlar" closable="false">
            <VBox spacing="15">
                <padding>
                    <Insets bottom="15" left="15" right="15" top="15" />
                </padding>
                
                <!-- Hızlı Raporlar -->
                <GridPane hgap="30" vgap="30" style="-fx-padding: 10;" VBox.vgrow="ALWAYS">
                    <VBox alignment="CENTER" spacing="12" style="-fx-background-color: #fff; -fx-padding: 28 24 28 24; -fx-background-radius: 18; -fx-effect: dropshadow(gaussian, #B0BEC5, 12, 0.2, 0, 4); -fx-border-color: transparent;" GridPane.columnIndex="0" GridPane.rowIndex="0" GridPane.hgrow="ALWAYS" VBox.vgrow="ALWAYS">
                        <Label text="📄 Genel Rapor" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #1976D2;" />
                        <Label text="Tüm izin kayıtları" style="-fx-font-size: 13px; -fx-text-fill: #78909C; -fx-font-weight: normal;" />
                        <Button onAction="#onExportGeneralReport" style="-fx-background-color: #1976D2; -fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold; -fx-background-radius: 24; -fx-padding: 10 32; -fx-cursor: hand;" text="Oluştur" />
                    </VBox>
                    <VBox alignment="CENTER" spacing="12" style="-fx-background-color: #fff; -fx-padding: 28 24 28 24; -fx-background-radius: 18; -fx-effect: dropshadow(gaussian, #CE93D8, 12, 0.18, 0, 4); -fx-border-color: transparent;" GridPane.columnIndex="1" GridPane.rowIndex="0" GridPane.hgrow="ALWAYS" VBox.vgrow="ALWAYS">
                        <Label text="👥 Çalışan Raporu" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #8E24AA;" />
                        <Label text="Çalışan bazlı izinler" style="-fx-font-size: 13px; -fx-text-fill: #9575CD; -fx-font-weight: normal;" />
                        <Button onAction="#onExportEmployeeReport" style="-fx-background-color: #8E24AA; -fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold; -fx-background-radius: 24; -fx-padding: 10 32; -fx-cursor: hand;" text="Oluştur" />
                    </VBox>
                    <VBox alignment="CENTER" spacing="12" style="-fx-background-color: #fff; -fx-padding: 28 24 28 24; -fx-background-radius: 18; -fx-effect: dropshadow(gaussian, #A5D6A7, 12, 0.18, 0, 4); -fx-border-color: transparent;" GridPane.columnIndex="0" GridPane.rowIndex="1" GridPane.hgrow="ALWAYS" VBox.vgrow="ALWAYS">
                        <Label text="📅 Aylık Rapor" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #388E3C;" />
                        <Label text="Bu ayın izinleri" style="-fx-font-size: 13px; -fx-text-fill: #66BB6A; -fx-font-weight: normal;" />
                        <Button onAction="#onExportMonthlyReport" style="-fx-background-color: #388E3C; -fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold; -fx-background-radius: 24; -fx-padding: 10 32; -fx-cursor: hand;" text="Oluştur" />
                    </VBox>
                    <VBox alignment="CENTER" spacing="12" style="-fx-background-color: #fff; -fx-padding: 28 24 28 24; -fx-background-radius: 18; -fx-effect: dropshadow(gaussian, #FFCC80, 12, 0.18, 0, 4); -fx-border-color: transparent;" GridPane.columnIndex="1" GridPane.rowIndex="1" GridPane.hgrow="ALWAYS" VBox.vgrow="ALWAYS">
                        <Label text="📈 İstatistik Raporu" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #F57C00;" />
                        <Label text="Detaylı analiz" style="-fx-font-size: 13px; -fx-text-fill: #FFB300; -fx-font-weight: normal;" />
                        <Button onAction="#onExportStatsReport" style="-fx-background-color: #F57C00; -fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold; -fx-background-radius: 24; -fx-padding: 10 32; -fx-cursor: hand;" text="Oluştur" />
                    </VBox>
                </GridPane>
            </VBox>
        </Tab>
        
        <!-- Ayarlar Tab -->
        <Tab text="⚙️ Ayarlar" closable="false">
            <VBox spacing="15">
                <padding>
                    <Insets bottom="15" left="15" right="15" top="15" />
                </padding>
                
                <!-- Resmi Tatiller -->
                <VBox spacing="10" style="-fx-background-color: #f5f5f5; -fx-padding: 15; -fx-background-radius: 5;">
                    <Label style="-fx-font-size: 16px; -fx-font-weight: bold;" text="Resmi Tatiller" />
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="Yıl:" />
                        <TextField fx:id="holidayYearField" prefWidth="100" promptText="2025" />
                        <Button onAction="#onUpdateHolidays" style="-fx-background-color: #2196F3; -fx-text-fill: white;" text="Güncelle" />
                        <Label text="(Google Calendar API'den otomatik çeker)" style="-fx-font-size: 12px; -fx-text-fill: #666;" />
                    </HBox>
                </VBox>
                
                <!-- PDF Ayarları -->
                <VBox spacing="10" style="-fx-background-color: #f5f5f5; -fx-padding: 15; -fx-background-radius: 5;">
                    <Label style="-fx-font-size: 16px; -fx-font-weight: bold;" text="PDF Ayarları" />
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <CheckBox fx:id="includeDetailsCheckBox" text="Gün detaylarını dahil et" selected="true" />
                        <CheckBox fx:id="includeStatsCheckBox" text="İstatistikleri dahil et" selected="true" />
                    </HBox>
                </VBox>
                
                <!-- Veritabanı -->
                <VBox spacing="10" style="-fx-background-color: #f5f5f5; -fx-padding: 15; -fx-background-radius: 5;">
                    <Label style="-fx-font-size: 16px; -fx-font-weight: bold;" text="Veritabanı" />
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Button onAction="#onBackupDatabase" style="-fx-background-color: #4CAF50; -fx-text-fill: white;" text="Yedekle" />
                        <Button onAction="#onRestoreDatabase" style="-fx-background-color: #FF9800; -fx-text-fill: white;" text="Geri Yükle" />
                        <Button onAction="#onResetDatabase" style="-fx-background-color: #f44336; -fx-text-fill: white;" text="Sıfırla" />
                        <Button onAction="#onUpdateAnnualLeaves" style="-fx-background-color: #1976D2; -fx-text-fill: white;" text="Yıllık İzin Haklarını Güncelle" />
                    </HBox>
                </VBox>
            </VBox>
        </Tab>
    </TabPane>
</VBox> 